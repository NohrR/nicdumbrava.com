<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Diagonal Split Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  /* ==========================================================
     ✅ GLOBAL TYPE SCALING (resolution-aware)
     Everything in rem/em scales automatically with this.
     ========================================================== */
  html{
    /* ~16px at 1080p, ~19–21px at 1440p, capped for 4K */
    font-size: clamp(14px, 0.60vw + 0.55vh, 22px);
  }

  body{
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: grey;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  .container {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }
  
  .interaction-blocker{
    position: fixed;
    inset: 0;
    display: none;
    z-index: 9998;           /* below title (9999), above everything else */
    background: transparent;
    cursor: default;         /* no loading spinner */
    user-select: none;
  }

  .container.transitioning *{
    pointer-events: none !important;
  }
  .container.transitioning .interaction-blocker{
    display: block;
    pointer-events: auto !important;
  }

  /* Prevent hover visuals during transitions */
  .container:not(.show-projects):not(.show-bio):not(.transitioning) .side:hover {
    filter: brightness(0.6);
    transform: scale(1.03);
    box-shadow: 0 1.11vh 1.82vw rgba(0,0,0,0.5);
    z-index: 2;
  }

  .side {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
    transition:
      transform 0.6s ease,
      filter 0.4s ease,
      box-shadow 0.4s ease,
      clip-path 0.6s ease,
      opacity 0.4s ease;
    filter: brightness(0.9);
    will-change: transform, clip-path, filter, opacity;
  }

  .side.left {
    background-image: url("https://res.cloudinary.com/dhbpbyrc9/image/upload/AdobeStock_507067955_1_tvukti.jpg");
    clip-path: polygon(0 0, 60% 0, 40% 100%, 0 100%);
  }

  .side.right {
    background-image: url("https://res.cloudinary.com/dhbpbyrc9/image/upload/AdobeStock_1788263600_1_o4jkyu.jpg");
    clip-path: polygon(60% 0, 100% 0, 100% 100%, 40% 100%);
  }

  /* ALWAYS ABOVE EVERYTHING */
  .center-title {
    position: fixed;
    top: 50%;
    left: 52.7%;
    transform: translate(-50%, -50%);
    /* ✅ clamp title so it scales but never gets goofy on huge screens */
    font-size: clamp(3.2rem, 4.2vw, 5.6rem);
    font-weight: 700;
    color: white;
    text-shadow: 0 0.37vh 1.04vw rgba(0,0,0,0.7);
    z-index: 9999;
    pointer-events: none;
    transition: all 0.6s ease;
    white-space: nowrap;
  }

  /* =========================
     CORNER TRAPEZOID LABELS (UPDATED)
     ========================= */
  .corner-tag{
    position: fixed;
    z-index: 9996; /* above sides, below title/blocker */
    background: rgba(15,23,42,0.95);
    color: #fff;
    font-weight: 900;
    letter-spacing: 0.19em;
    text-transform: uppercase;
    display: grid;
    place-items: center;
    pointer-events: none;
    user-select: none;
    border-radius: 0; /* no rounded edges */
    box-shadow: 0 1.67vh 2.34vw rgba(0,0,0,0.35);
  }

  .corner-tag.top-left{
    top: 0;
    left: 0;
    width: 29.17vw;
    height: 7.22vh;
    clip-path: polygon(0 0, 100% 0, 94% 100%, 0 100%);
  }

  .corner-tag.bottom-right{
    right: 0;
    bottom: 0;
    width: 29.17vw;
    height: 7.22vh;
    clip-path: polygon(6% 0, 100% 0, 100% 100%, 0 100%);
  }

  .corner-tag span{
    /* ✅ scales with root font-size */
    font-size: clamp(1.0rem, 0.55vw, 1.35rem);
    padding: 0 1.1rem;
    line-height: 1.1;
    text-align: center;
    white-space: nowrap;
  }

  @media (max-width: 720px){
    .corner-tag.top-left{ width: 12.50vw; height: 6.11vh; }
    .corner-tag.bottom-right{ width: 12.50vw; height: 6.11vh; }
    .corner-tag span{ font-size: 0.92rem; }
  }

  @media (max-width: 480px){
    .corner-tag.top-left{ width: 10.42vw; height: 5.56vh; }
    .corner-tag.bottom-right{ width: 15.62vw; height: 5.56vh; }
    .corner-tag span{ font-size: 0.82rem; letter-spacing: 0.06em; }
  }

  /* Hide corner tags when overlays are open/closing */
  .container.show-projects .corner-tag,
  .container.show-bio .corner-tag,
  .container.closing .corner-tag{
    opacity: 0;
    transform: translateY(-0.74vh);
    transition: opacity 200ms ease, transform 200ms ease;
  }

  .side-label {
    position: absolute;
    bottom: 10%;
    color: rgb(9, 255, 255);
    font-weight: 600;
    font-size: 1.1rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    text-shadow: 0 0.19vh 0.42vw rgba(0,0,0,0.85);
  }
  .side.left .side-label  { left: 15%; }
  .side.right .side-label { right: 20%; text-align: right; }

  .container.show-projects .side,
  .container.show-bio .side {
    filter: blur(3px) brightness(0.4);
  }

  .container.show-projects .side.left {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    transform: scale(1.08) translateX(-2%);
    z-index: 1;
  }
  .container.show-projects .side.right {
    opacity: 0;
    pointer-events: none;
  }

  .container.show-bio .side.right {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    transform: scale(1.08) translateX(2%);
    z-index: 1;
  }
  .container.show-bio .side.left {
    opacity: 0;
    pointer-events: none;
  }

  /* Title moves to top when any overlay is open */
  .container.show-bio .center-title,
  .container.show-projects .center-title {
    top: 2.22vh;
    left: 50%;
    transform: translate(-50%, 0);
    font-size: clamp(2.1rem, 2.0vw, 3.0rem);
    text-align: center;
  }

  /* ==========================================================
     SMOOTH RETURN-TO-MENU FIX (prevents weird overlap/fade)
     ========================================================== */
  .container.returning-projects .side.left { z-index: 2; }
  .container.returning-projects .side.right { z-index: 1; }

  .container.returning-projects .side.right{
    opacity: 1 !important;
    transition: transform 0.6s ease, filter 0.4s ease, box-shadow 0.4s ease, clip-path 0.6s ease !important;
  }

  .container.returning-bio .side.right { z-index: 2; }
  .container.returning-bio .side.left  { z-index: 1; }

  .container.returning-bio .side.left{
    opacity: 1 !important;
    transition: transform 0.6s ease, filter 0.4s ease, box-shadow 0.4s ease, clip-path 0.6s ease !important;
  }

  /* ---------------- Overlays ---------------- */
  .overlay {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 9.26vh 8% 4.44vh;
    background: radial-gradient(circle at top, rgba(15,23,42,0.85), rgba(15,23,42,0.95));
    z-index: 10;
    color: #f9fafb;
    pointer-events: none;
    opacity: 0;
    will-change: opacity, transform;
  }

  .overlay-content {
    width: 100%;
    max-width: clamp(980px, 74vw, 1600px);
    height: 100%;
    min-height: 0;
    display: flex;
    flex-direction: column;
    gap: 1.67vh;
  }

  .back-button {
    align-self: flex-start;
    padding: 0.74vh 0.83vw;
    border-radius: 52.03vw;
    border: 1px solid rgba(255,255,255,0.3);
    background: rgba(15,23,42,0.7);
    color: #e5e7eb;
    font-size: 0.95rem; /* ✅ rem-based */
    cursor: pointer;
    backdrop-filter: blur(0.42vw);
    transition: background 0.2s ease, transform 0.1s ease;
  }
  .back-button:hover  { background: rgba(148,163,184,0.4); transform: translateY(-0.09vh); }
  .back-button:active { transform: translateY(0.09vh); }

  /* ---------------- Animations ---------------- */
  @keyframes overlayFadeIn  { from { opacity: 0; } to { opacity: 1; } }
  @keyframes overlayFadeOut { from { opacity: 1; } to { opacity: 0; } }
  @keyframes panelFadeUp    { from { opacity: 0; transform: translateY(1.48vh); } to { opacity: 1; transform: translateY(0); } }
  @keyframes panelFadeDown  { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(0.75rem); } } /* ✅ was 12px */

  /* ---------------- PROJECTS OVERLAY ---------------- */
  .overlay-projects { transform: translateX(-40px); }

  .container.show-projects:not(.closing) .overlay-projects {
    display: flex;
    pointer-events: auto;
    transform: translateX(0);
    animation: overlayFadeIn 650ms ease both;
  }

  .container.closing-projects .overlay-projects {
    display: flex;
    pointer-events: none;
    transform: translateX(0);
    animation: overlayFadeOut 450ms ease both;
  }

  .projects-shell{
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 0;
  }

  /* ===========================
    CUSTOM OVAL SCROLLBAR
    =========================== */
  .detail-body,
  .bio-body{
    scrollbar-width: thin;
    scrollbar-color: rgba(148,163,184,0.65) transparent;
  }

  .detail-body::-webkit-scrollbar,
  .bio-body::-webkit-scrollbar{
    width: 10px;
  }

  .detail-body::-webkit-scrollbar-track,
  .bio-body::-webkit-scrollbar-track{
    background: transparent;
  }

  .detail-body::-webkit-scrollbar-thumb,
  .bio-body::-webkit-scrollbar-thumb{
    background: linear-gradient(
      180deg,
      rgba(148,163,184,0.85),
      rgba(226,232,240,0.95)
    );
    border-radius: 52.03vw;
    border: 3px solid transparent;
    background-clip: content-box;
  }

  .detail-body::-webkit-scrollbar-thumb:hover,
  .bio-body::-webkit-scrollbar-thumb:hover{
    background: linear-gradient(
      180deg,
      rgba(165,180,252,1),
      rgba(56,189,248,1)
    );
  }

  .detail-body::-webkit-scrollbar-thumb:active,
  .bio-body::-webkit-scrollbar-thumb:active{
    background: linear-gradient(
      180deg,
      rgba(99,102,241,1),
      rgba(37,99,235,1)
    );
  }

  .projects-layout{
    width: min(82vw, 1650px);
    height: min(80vh, 960px);
    background: rgba(15,23,42,0.98);
    border-radius: 26px;
    border: 1px solid rgba(148,163,184,0.7);
    box-shadow: 0 24px 60px rgba(15,23,42,0.9);

    display: grid;
    grid-template-columns: clamp(300px, 22vw, 420px) 1fr;
    gap: 0.94vw;

    padding: clamp(16px, 1.2vw, 26px);
    overflow: hidden;
    will-change: opacity, transform;
  }

  .container.show-projects:not(.closing-projects) .projects-layout{
    animation: panelFadeUp 1100ms ease both;
    animation-delay: 180ms;
  }
  .container.closing-projects .projects-layout{
    animation: panelFadeDown 420ms ease both;
  }

  .projects-sidebar{
    display: grid;
    grid-template-rows: auto 1fr;
    gap: 0.75rem; /* ✅ was 12px */
    min-height: 0;
  }

  .project-photo{
    background: rgba(15,23,42,0.85);
    border-radius: 18px;
    border: 1px dashed rgba(148,163,184,0.8);
    padding: 0.65rem; /* ✅ was 10px */
  }

  .photo-frame{
    position: relative;
    height: clamp(140px, 16vh, 240px);
    border-radius: 12px;
    overflow: hidden;
    background: rgba(15,23,42,0.9);
  }

  #projectPhotoImg{
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 1;
    transition: opacity 180ms ease;
  }

  .photo-caption{
    margin-top: 0.4rem; /* ✅ was 6px */
    font-size: 0.9rem;  /* ✅ slightly larger, rem-based */
    color: #cbd5f5;
    line-height: 1.3;
  }
  .photo-caption span{ opacity: 0.9; font-style: italic; }

  .projects-sidebar-list{
    display: grid;
    grid-template-rows: auto auto 1fr;
    gap: 0.75rem; /* ✅ was 12px */
    min-height: 0;
  }

  .section-title-sm{
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    text-align: center;
  }

  .section-subtitle-sm{
    font-size: 0.9rem;
    color: #cbd5f5;
    line-height: 1.35;
  }

  .projects-list{
    margin-top: 0.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.65rem; /* ✅ was 10px */
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 0.65rem; /* ✅ was 10px */
    padding-left: 0.125rem; /* ✅ was 2px */
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .projects-list::-webkit-scrollbar{ width: 0; height: 0; display: none; }

  .projects-category{
    margin: 0.5rem 0 0.15rem;
    padding: 0.5rem 0.65rem;
    border-radius: 12px;
    border: 1px solid rgba(148,163,184,0.28);
    background: rgba(15,23,42,0.55);
    color: #a5b4fc;
    font-size: 0.8rem;
    font-weight: 800;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    text-align: center;
    user-select: none;
  }

  .project-card{
    width: 100%;
    background: linear-gradient(135deg, rgba(15,23,42,0.96), rgba(30,64,175,0.9));
    border-radius: 16px;
    border: 1px solid rgba(148,163,184,0.6);
    padding: 0.65rem 0.9rem 0.65rem; /* ✅ was 10px 14px */
    cursor: pointer;
    box-shadow: 0 10px 28px rgba(15,23,42,0.8);
    transition: box-shadow 0.22s ease, background 0.22s ease, border-color 0.22s ease;
  }

  .project-card:hover{
    box-shadow: 0 18px 40px rgba(15,23,42,0.9);
    background: linear-gradient(135deg, rgba(30,64,175,0.96), rgba(56,189,248,0.9));
    border-color: rgba(226,232,240,0.9);
  }

  .project-card.selected{
    border-color: #e5e7eb;
    box-shadow: 0 22px 55px rgba(15,23,42,1);
  }

  .project-summary{
    height: 2.7em;
    overflow: hidden;
    margin-top: 0.3rem;
    font-size: 0.9rem;
    color: #e5e7eb;
    opacity: 0;
    transform: translateY(-0.25rem); /* ✅ was -4px */
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
  .project-card:hover .project-summary{ opacity: 1; transform: translateY(0); }

  /* ===========================
     SCROLLABLE DETAIL PANEL
     =========================== */
  .project-detail-panel{
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: radial-gradient(circle at top left, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
    border-radius: 20px;
    border: 1px solid rgba(148,163,184,0.7);
    padding: 1rem 1.1rem; /* ✅ was 16px 18px */
  }

  .detail-inner{
    display: none;
    height: 100%;
    min-height: 0;
  }
  .detail-inner.active{
    display: flex;
    flex-direction: column;
    gap: 0.65rem; /* ✅ was 10px */
    flex: 1;
    min-height: 0;
  }

  .detail-body{
    flex: 1;
    min-height: 0;
    overflow: auto;
    padding-right: 0.4rem; /* ✅ was 6px */
    font-size: 1.0rem;     /* ✅ bump a touch; scales with root */
    line-height: 1.55;
    color: #e5e7eb;
    margin-top: 0.65rem;   /* ✅ was 10px */
  }

  .detail-title{
    text-align: center;
    font-size: 1.35rem; /* ✅ readable on 1440p */
  }

  .detail-gallery{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem; /* ✅ was 12px */
    margin-top: 0.9rem; /* ✅ was 14px */
    padding-bottom: 0.25rem; /* ✅ was 4px */
  }
  .detail-gallery img{
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 16px;
    border: 1px solid rgba(148,163,184,0.55);
    box-shadow: 0 10px 24px rgba(0,0,0,0.35);
    cursor: zoom-in;
    transition: transform 180ms ease, filter 180ms ease, box-shadow 180ms ease;
  }
  .detail-gallery img:hover{
    transform: translateY(-2px) scale(1.02);
    filter: brightness(1.05);
    box-shadow: 0 16px 34px rgba(0,0,0,0.45);
  }

  @media (max-width: 1000px){
    .projects-layout { grid-template-columns: 1fr; height: min(78vh, 760px); }
  }

  @media (max-width: 640px){
    .detail-gallery{ grid-template-columns: 1fr; }
    .detail-gallery img{ height: 180px; }
  }

  /* ===========================
     Lightbox
     =========================== */
  .lightbox{
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1.75rem; /* ✅ was 28px */
    background: rgba(2,6,23,0.86);
    backdrop-filter: blur(0.42vw);
    z-index: 10050;
  }
  .lightbox.open{ display: flex; }

  .lightbox-panel{
    position: relative;
    width: min(1100px, 92vw);
    height: min(80vh, 760px);
    border-radius: 22px;
    overflow: auto;
    border: 1px solid rgba(148,163,184,0.55);
    box-shadow: 0 30px 90px rgba(0,0,0,0.65);
    background: rgba(15,23,42,0.95);
    transform: translateY(0.65rem) scale(0.98); /* ✅ was 10px */
    opacity: 0;
    transition: transform 220ms ease, opacity 220ms ease;
    padding: 1.1rem; /* ✅ was 18px */
  }
  .lightbox.open .lightbox-panel{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .lightbox-img{
    width: 100%;
    max-height: 64vh;
    height: auto;
    object-fit: contain;
    display: block;
    border-radius: 16px;
    background: radial-gradient(circle at top, rgba(15,23,42,0.45), rgba(2,6,23,0.85));
    border: 1px solid rgba(148,163,184,0.35);
  }

  .lightbox-extras{
    display: none;
    margin-top: 0.9rem;
    padding-top: 0.9rem;
    border-top: 1px solid rgba(148,163,184,0.25);
  }
  .lightbox-extras.open{ display: block; }

  .lightbox-extras-title{
    margin-bottom: 0.65rem;
    font-size: 0.95rem;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: #cbd5f5;
    opacity: 0.95;
  }

  .lightbox-extras-grid{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
  }

  .lightbox-extras-grid img{
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 16px;
    border: 1px solid rgba(148,163,184,0.55);
    box-shadow: 0 10px 24px rgba(0,0,0,0.35);
    cursor: zoom-in;
    transition: transform 180ms ease, filter 180ms ease, box-shadow 180ms ease;
  }
  .lightbox-extras-grid img:hover{
    transform: translateY(-2px) scale(1.02);
    filter: brightness(1.05);
    box-shadow: 0 16px 34px rgba(0,0,0,0.45);
  }

  .lightbox-extras-grid.cols-4{
    grid-template-columns: repeat(4, 1fr);
  }

  @media (max-width: 900px){
    .lightbox-extras-grid.cols-4{
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px){
    .lightbox-img{ max-height: 52vh; }
    .lightbox-extras-grid{ grid-template-columns: 1fr; }
    .lightbox-extras-grid img{ height: 190px; }
  }

  .lightbox-close{
    position: sticky;
    top: 0.75rem; /* ✅ was 12px */
    margin-left: auto;
    width: 2.625rem;  /* ✅ was 42px */
    height: 2.625rem; /* ✅ was 42px */
    border-radius: 52.03vw;
    border: 1px solid rgba(255,255,255,0.22);
    background: rgba(15,23,42,0.7);
    color: #e5e7eb;
    font-size: 1.25rem; /* ✅ was 20px */
    line-height: 1;
    cursor: pointer;
    display: grid;
    place-items: center;
    backdrop-filter: blur(8px);
    transition: transform 120ms ease, background 160ms ease, border-color 160ms ease;
    z-index: 2;
  }
  .lightbox-close:hover{
    background: rgba(148,163,184,0.35);
    border-color: rgba(226,232,240,0.7);
    transform: scale(1.05);
  }
  .lightbox-close:active{ transform: scale(0.98); }

  /* ---------------- BIO OVERLAY ---------------- */
  .overlay-bio { transform: translateX(40px); }

  .container.show-bio:not(.closing) .overlay-bio {
    display: flex;
    pointer-events: auto;
    transform: translateX(0);
    animation: overlayFadeIn 650ms ease both;
  }

  .container.closing-bio .overlay-bio {
    display: flex;
    pointer-events: none;
    transform: translateX(0);
    animation: overlayFadeOut 450ms ease both;
  }

  .bio-shell{
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 0;
  }

  .bio-grid{
    width: min(82vw, 1650px);
    height: min(80vh, 960px);
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1.1fr 1fr;
    gap: 0.94vw;
    padding: clamp(16px, 1.2vw, 26px);
    border-radius: 26px;
    border: 1px solid rgba(148,163,184,0.7);
    background: rgba(15,23,42,0.98);
    box-shadow: 0 24px 60px rgba(15,23,42,0.9);
    overflow: hidden;
    will-change: opacity, transform;
  }

  .container.show-bio:not(.closing-bio) .bio-grid{
    animation: panelFadeUp 1100ms ease both;
    animation-delay: 180ms;
  }
  .container.closing-bio .bio-grid{
    animation: panelFadeDown 420ms ease both;
  }

  .bio-card{
    border-radius: 22px;
    border: 1px solid rgba(148,163,184,0.55);
    background: radial-gradient(circle at top left, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
    box-shadow: 0 14px 40px rgba(15,23,42,0.75);
    padding: 1.1rem; /* ✅ was 18px */
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .bio-card.bio-biography{ grid-column: 1 / -1; }

  .bio-card h2{
    font-size: 1.15rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: #a5b4fc;
    margin-bottom: 0.65rem; /* ✅ was 10px */
    flex: 0 0 auto;
  }

  .bio-body{
    flex: 1;
    min-height: 0;
    overflow: auto;
    padding-right: 0.4rem; /* ✅ was 6px */
    color: #e5e7eb;
    font-size: 1.0rem;
    line-height: 1.55;
  }

  .bio-list{ margin: 0; padding-left: 1.1rem; } /* ✅ was 18px */
  .bio-list li{ margin-bottom: 0.4rem; }        /* ✅ was 6px */

  @media (max-width: 900px){
    .bio-grid{
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
      height: min(80vh, 760px);
    }
    .bio-card.bio-biography{ grid-column: auto; }
  }

  /* ==========================================================
     Bottom Center Quick Links Pill
     ========================================================== */
  .quick-links{
    position: fixed;
    left: 50%;
    bottom: 18px;
    transform: translateX(-50%);
    z-index: 9997;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;

    padding: 10px 12px;
    border-radius: 52.03vw;
    border: 1px solid rgba(148,163,184,0.55);
    background: rgba(15,23,42,0.78);
    box-shadow: 0 18px 45px rgba(0,0,0,0.45);
    backdrop-filter: blur(0.52vw);
    -webkit-backdrop-filter: blur(0.52vw);
  }

  .quick-btn{
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border-radius: 52.03vw;
    border: 1px solid rgba(255,255,255,0.22);
    background: rgba(15,23,42,0.75);
    color: #e5e7eb;
    font-weight: 650;
    font-size: 1.0rem; /* ✅ was 0.95rem */
    letter-spacing: 0.01em;
    cursor: pointer;
    text-decoration: none;
    user-select: none;
    transition: transform 120ms ease, background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
  }

  .quick-btn:hover{
    background: rgba(148,163,184,0.35);
    border-color: rgba(226,232,240,0.75);
    transform: translateY(-1px);
    box-shadow: 0 10px 26px rgba(0,0,0,0.35);
  }
  .quick-btn:active{ transform: translateY(1px); }

  .quick-btn svg{
    width: 18px;
    height: 18px;
    flex: 0 0 auto;
  }

  .top-left-image {
    position: fixed;
    top: clamp(0px, 1.5vh, 0px);
    left: clamp(0px, 1.5vw, 0px);
    width: clamp(60px, 8vw, 140px);
    height: auto;
    z-index: 10;
    pointer-events: none;
    transition: opacity 260ms ease, transform 260ms ease;
  }

  .bottom-right-image {
    position: fixed;
    bottom: clamp(0px, 1.5vh, 0px);
    right: clamp(0px, 1.5vw, 0px);
    width: clamp(60px, 8vw, 140px);
    height: auto;
    z-index: 10;
    pointer-events: none;
    transition: opacity 260ms ease, transform 260ms ease;
  }

  .container.show-projects .top-left-image,
  .container.show-projects .bottom-right-image,
  .container.show-bio .top-left-image,
  .container.show-bio .bottom-right-image,
  .container.closing .top-left-image,
  .container.closing .bottom-right-image{
    opacity: 0;
    transform: scale(0.98);
  }

  @media (max-width: 520px){
    .quick-links{
      width: calc(100vw - 22px);
      justify-content: space-between;
      gap: 8px;
      padding: 10px;
    }
    .quick-btn{
      flex: 1;
      justify-content: center;
      padding: 10px 12px;
      font-size: 0.92rem;
    }
  }

  .container.show-projects .quick-links,
  .container.show-bio .quick-links,
  .container.closing .quick-links{
    opacity: 0;
    pointer-events: none;
    transform: translateX(-50%) translateY(10px);
    transition: opacity 200ms ease, transform 200ms ease;
  }
</style>
</head>

<body>
<div class="container">
  <div class="interaction-blocker" aria-hidden="true"></div>

  <div class="center-title">NICOLAS DUMBRAVA</div>

  <div class="quick-links" aria-label="Quick links">
    <a class="quick-btn" href="https://res.cloudinary.com/dhbpbyrc9/raw/upload/Resume_Nicolas_Dumbrava_2026_kzmrat.docx" download aria-label="Download Resume">
      <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <path d="M7 10l5 5 5-5"/>
        <path d="M12 15V3"/>
      </svg>
      <span>Resume</span>
    </a>

    <a class="quick-btn" href="https://www.youtube.com/@NicolasDumbrava-e9r" target="_blank" rel="noopener noreferrer" aria-label="Open YouTube">
      <svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor">
        <path d="M23.498 6.186a2.997 2.997 0 0 0-2.111-2.12C19.505 3.5 12 3.5 12 3.5s-7.505 0-9.387.566A2.997 2.997 0 0 0 .502 6.186 31.4 31.4 0 0 0 0 12a31.4 31.4 0 0 0 .502 5.814 2.997 2.997 0 0 0 2.111 2.12C4.495 20.5 12 20.5 12 20.5s7.505 0 9.387-.566a2.997 2.997 0 0 0 2.111-2.12A31.4 31.4 0 0 0 24 12a31.4 31.4 0 0 0-.502-5.814ZM9.75 15.5v-7l6.5 3.5-6.5 3.5Z"/>
      </svg>
      <span>YouTube</span>
    </a>
  </div>

  <img 
    src="https://res.cloudinary.com/dhbpbyrc9/image/upload/AdobeStock_507067955_1_1_x2p0zc.png"
    style="width: 40vw; min-width: 330px;" 
    alt="Top Left Graphic"
    class="top-left-image"
  />

  <img 
    src="https://res.cloudinary.com/dhbpbyrc9/image/upload/AdobeStock_507067955_1_2_abyj3r.png"
    style="width: 40vw; min-width: 330px;" 
    alt="Bottom Right Graphic"
    class="bottom-right-image"
  />

  <div class="side left"></div>
  <div class="side right"></div>

  <!-- PROJECTS OVERLAY -->
  <div class="overlay overlay-projects">
    <div class="overlay-content">
      <button class="back-button" type="button">← Back to main</button>

      <div class="projects-shell">
        <div class="projects-layout">

          <aside class="projects-sidebar">
            <div class="project-photo">
              <div class="photo-frame">
                <img id="projectPhotoImg" src="https://picsum.photos/600/400?random=1" alt="">
              </div>

              <p class="photo-caption">
                <strong id="projectPhotoTitle">Select a project</strong><br>
                <span id="projectPhotoCaption">Click a card to swap the image.</span>
              </p>
            </div>

            <div class="projects-sidebar-list">
              <div class="section-title-sm">Projects</div>
              <p class="section-subtitle-sm">
                Click on the various cards in this list to see what projects I've worked on.
              </p>

              <div class="projects-list">

                <div class="projects-category">Electrical</div>

                <article class="project-card"
                  data-target="detail-skate-sharpener"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/Panel_wiring_iu6f30.jpg"
                  data-photoalt="Tap handle project photo"
                  data-phototitle="Skate Sharpener"
                  data-photocaption="Designed and built a control system simulating an automatic skate sharpener">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Skate Sharpener</h2><br>
                      <span class="project-meta"><b>Electrical</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Theme: </b>3 phase motor control with timed interlocking</span>
                    </div>
                  </header>
                  <p class="project-summary">Designed and built a control system simulating an automatic skate sharpener</p>
                </article>

                <article class="project-card"
                  data-target="detail-plc-final"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/final_setup_assembly_p0uxiv.jpg"
                  data-photoalt="Tap handle project photo"
                  data-phototitle="PLC Final"
                  data-photocaption="Integrated a UR5 pick-and-place into a PLC-controlled conveyor + pressing system">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>PLC 1 Final</h2><br>
                      <span class="project-meta"><b>Electrical</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Theme: </b>Real system integration + commissioning + I/O mapping</span>
                    </div>
                  </header>
                  <p class="project-summary">Integrated a UR5 pick-and-place into a PLC-controlled conveyor + pressing system</p>
                </article>

                <div class="projects-category">Manufacturing</div>

                <article class="project-card selected"
                  data-target="detail-milling-block"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/MILL_BLOCK_1_qjml1r.jpg"
                  data-photoalt="CNC fixture project photo"
                  data-phototitle="Milling Block"
                  data-photocaption="A milling block machined from mild steel bar stock">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Milling Block</h2><br>
                      <span class="project-meta"><b>Manufacturing</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Material:</b> Mild Steel</span>
                    </div>
                  </header>
                  <p class="project-summary">A milling block machined from mild steel bar stock</p>
                </article>

                <article class="project-card"
                  data-target="detail-drill-gauge"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/Drill_Gauge_1_ylhqq2.jpg"
                  data-photoalt="Dashboard project screenshot"
                  data-phototitle="Drill Gauge"
                  data-photocaption="Accurately produced drill gauge with specific requirements">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Drill Gauge</h2><br>
                      <span class="project-meta"><b>Manufacturing</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Material: </b> Mild Steel</span>
                    </div>
                  </header>
                  <p class="project-summary">Accurately produced drill gauge with specific requirements</p>
                </article>

                <article class="project-card"
                  data-target="detail-tap-handle"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/TAP_2_rd7on9.jpg"
                  data-photoalt="Tap handle project photo"
                  data-phototitle="Tap Handle"
                  data-photocaption="Custom tap handle machined from bar stock">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Tap Handle</h2><br>
                      <span class="project-meta"><b>Manufacturing</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Material: </b>Mild Steel (5/8&quot; bar stock handle components)</span>
                    </div>
                  </header>
                  <p class="project-summary">Custom tap handle machined from bar stock.</p>
                </article>

                <article class="project-card"
                  data-target="detail-tap-jaws"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/TAP_3_tzhdb0.jpg"
                  data-photoalt="Tap handle jaws project photo"
                  data-phototitle="Tap Handle Jaws"
                  data-photocaption="Manufactured tap handle jaws">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Tap Handle Jaws</h2><br>
                      <span class="project-meta"><b>Manufacturing</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Material: </b>Mild steel (3/4&quot; square key stock)</span>
                    </div>
                  </header>
                  <p class="project-summary">Manufactured tap handle jaws</p>
                </article>

                <article class="project-card"
                  data-target="detail-robot-flange"
                  data-photo="https://res.cloudinary.com/dhbpbyrc9/image/upload/EOAT_4_up3wer.jpg"
                  data-photoalt="Tap handle project photo"
                  data-phototitle="Robot End-of-Arm Flange"
                  data-photocaption="Created a UR5 end-of-arm flange">
                  <header class="project-header">
                    <div class="project-title-row">
                      <h2>Robot End-of-Arm Flange</h2><br>
                      <span class="project-meta"><b>Manufacturing</b></span>
                    </div>
                    <div class="skill-tags">
                      <span><b>Material: </b>Aluminum puck/bar stock cutouts</span>
                    </div>
                  </header>
                  <p class="project-summary">Created a UR5 end-of-arm flange</p>
                </article>

              </div>
            </div>
          </aside>

          <section class="project-detail-panel">

            <!-- (UNCHANGED CONTENT BELOW) -->
            <!-- ... your detail panels stay exactly the same ... -->

            <div class="detail-inner active" id="detail-milling-block">
              <h2 class="detail-title">Milling Block</h2>
              <div class="detail-body">
                <p>
                <b>Processes:</b> Milling, facing, drilling/tapping, reaming, broaching, slotting, surface grinding<br><br>
                <b>Material:</b> Mild steel<br><br>
                Machined a milling block from mild steel bar stock, completing faces, profiles, holes, and slots to drawing-defined tolerances. Used in-process verification throughout manufacturing with a Go/No-Go gauge.<br><br>
                <b>Technical Scope:</b><br><br>
                ● Face and square stock close to final dimensions<br>
                ● Drill and tap required holes<br>
                ● Machine features, slots, and profiles<br>
                ● Complete optional broaching and surface grinding to final dimensions (bonus work)<br>
                ● Maintain drawing tolerances and surface finish requirements<br><br>
                <b>Work Performed</b><br><br>
                ● Completed the majority of machining on a vertical mill; finished final surface quality and dimensions on a surface grinder<br>
                ● Laid out features using a surface plate and height gauge<br>
                ● Referenced and re-established datums during re-orientation using an edge finder<br>
                ● Sequenced operations to maximize efficiency while maintaining accuracy (including optional broaching + grinding)<br><br>
                <b>Tools &amp; Equipment</b><br><br>
                ● Vertical mill, surface grinder, arbour press + broach kit<br>
                ● Mitutoyo Absolute digital caliper, height gauge + surface plate, edge finder<br>
                ● Go/No-Go gauge used throughout production<br><br>
                <b>Quality &amp; Verification</b><br><br>
                ● Verified dimensions after major operations and during setup changes<br>
                ● Used a Go/No-Go gauge for compliance checks during machining and at project completion<br><br>
                </p>

                <div class="detail-gallery">
                  <img src="https://res.cloudinary.com/dhbpbyrc9/image/upload/MILLING_BLOCK_DRAWING_page-0001_rhjkbp.jpg" alt="Milling Block photo 1">
                  <img src="https://res.cloudinary.com/dhbpbyrc9/image/upload/MILL_BLOCK_7_z7s319.jpg" alt="Milling Block photo 2">
                  <img src="https://res.cloudinary.com/dhbpbyrc9/image/upload/MILL_BLOCK_4_lzsube.jpg" alt="Milling Block photo 3">
                </div>
              </div>
            </div>

            <!-- KEEP ALL YOUR OTHER detail-inner PANELS AS-IS -->
            <!-- (I left them out here only to avoid duplicating ~1000 lines) -->

          </section>

        </div>
      </div>
    </div>
  </div>

  <div class="overlay overlay-bio">
    <div class="overlay-content">
      <button class="back-button" type="button">← Back to main</button>

      <div class="bio-shell">
        <div class="bio-grid">
          <section class="bio-card bio-biography">
            <h2>Biography</h2>
            <div class="bio-body">
              <p>
              I am an Electro-Mechanical and Automation Maintenance student with a strong foundation in both mechanical and electrical systems, supported by extensive hands-on experience in industrial fabrication, machine assembly, pneumatics, and automation environments.<br><br>
              Through my Millwright Apprentice Co-op at ATS Life Sciences Systems, I've developed a high level of confidence in millwright-related tasks, including machine guarding, precision fit-up, alignment, interpretation of engineering drawings, and on-floor support during the build phase of automated equipment. Working alongside experienced tradespeople strengthened my understanding of industrial standards, safety practices, and the importance of quality workmanship.<br><br>
              My technical education is complemented by a strong interest in automation and controls, where I have gained hands-on experience designing, wiring, programming, and troubleshooting both PLC-based systems and hardwired control circuits. I enjoy learning through system integration and commissioning, where programs and hardware are validated through real-world testing and iterative debugging.<br><br>
              I am known for my initiative, reliability, and ability to adapt quickly in fast-paced industrial settings while maintaining a strong focus on safety, accuracy, and teamwork.<br><br>
              </p>
            </div>
          </section>

          <section class="bio-card">
            <h2>Certifications & Technical Training</h2>
            <div class="bio-body">
              <ul class="bio-list">
                <li><b>Electrical, Automation & Controls</b>
                  <ul style="padding-top: 10px; padding-left: 30px;">
                    <li>PLC Programming & Integration</li>
                    <ul style="padding-top: 10px; padding-left: 60px;">
                      <li>Allen-Bradley CompactLogix using Studio 5000 and Omron Sysmac</li>
                      <li>Ladder logic development, I/O mapping, sequencing, testing, and troubleshooting</li>
                      <li>Hands-on system integration and real-time debugging during commissioning</li>
                    </ul>
                    <li style="padding-top: 10px;">Hardwired Control Circuits</li>
                    <ul style="padding-top: 10px; padding-left: 60px;">
                      <li>Design and wiring of relay-based control circuits</li>
                      <li>Pushbuttons, indicator lights, proximity sensors, timers, contactors, and interlocks</li>
                      <li>Clear separation and documentation of power and control circuits</li>
                    </ul>
                    <li style="padding-top: 10px;">Variable Frequency Drives (VFDs)</li>
                    <ul style="padding-top: 10px; padding-left: 60px;">
                      <li>Parameter setup including min/max frequency limits and accel/decel curves</li>
                      <li>Integration with pushbutton and PLC-based interlocks for safe motor control</li>
                    </ul>
                    <li style="padding-top: 10px;">Robotics & Automation Integration</li>
                    <ul style="padding-top: 10px; padding-left: 60px;">
                      <li>Integration of UR collaborative robots with PLC-controlled systems</li>
                      <li>Robot I/O wiring, pneumatic solenoid control, and vision-based pick-and-place</li>
                      <li>Commissioning through I/O checkout, dry runs, and live cycle testing</li>
                    </ul>
                  </ul>
                </li>
                <br>
                <li><b>Mechanical, Pneumatic & Safety Systems</b></li>
                <ul style="padding-top: 10px; padding-left: 30px;">
                  <li>Industrial fabrication and assembly during a Millwright Apprentice Co-op in an automated machine-building environment</li>
                  <li>Construction and installation of machine guarding using aluminum extrusion, including cutting, milling, deburring, and final assembly</li>
                  <li>Precision fit-up and on-floor installation of mechanical tooling and modules using alignment dowels and custom fixtures</li>
                  <li>Interpretation of engineering drawings, tolerances, orientations, and fastener requirements during build and installation</li>
                  <li>Pneumatic system layout, hose routing, solenoid integration, and functional testing based on pneumatic schematics</li>
                  <li>Support of toolmakers and electricians during machine builds, contributing to mechanical assembly and integration</li>
                  <li>Safety-focused work practices, including PPE compliance, lockout/tagout awareness, and safe commissioning procedures</li>
                </ul>
                <br>
                <li><b>Awards & Recognition</b></li>
                <ul style="padding-top: 10px; padding-left: 30px;">
                  <li>Conestoga College Canerector Foundation Scholar</li>
                  <li>Ranked in the top 10% of the EMAM program</li>
                  <li>Employer-endorsed co-op student with invitation to return</li>
                </ul>
              </ul>
            </div>
          </section>

          <section class="bio-card">
            <h2>Education</h2>
            <div class="bio-body">
              <ul class="bio-list">
                <li><b>Electro-Mechanical and Automation Maintenance (EMAM)</b><br>Conestoga College<br><i>September 2024 – April 2026</i></li>
                <ul style="padding-left: 40px;">
                  <li>Comprehensive technical program covering both mechanical and electrical disciplines, exempting graduates from the first two levels of apprenticeship education(433A Millwright and 442A Industrial Electrician)</li>
                  <li>Coursework and labs in industrial maintenance, PLCs, automation systems, motor controls, pneumatics, hydraulics, robotics, and preventive maintenance</li>
                  <li>Strong emphasis on hands-on system integration, troubleshooting, and real-world industrial applications</li>
                </ul>
                <li><b>High School Diploma</b><br>Resurrection Catholic Secondary School<br><i>September 2019 - June 2023</i></li>
              </ul>
            </div>
          </section>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- Lightbox markup -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <div class="lightbox-panel" role="dialog" aria-modal="true" aria-label="Image preview">
    <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close">×</button>

    <img class="lightbox-img" id="lightboxImg" src="" alt="">

    <div class="lightbox-extras" id="lightboxExtras" aria-hidden="true">
      <div class="lightbox-extras-title">More reference images</div>
      <div class="lightbox-extras-grid" id="lightboxExtrasGrid"></div>
    </div>
  </div>
</div>

<script>
  // ✅ JS UNCHANGED
  const container = document.querySelector('.container');
  const leftSide = document.querySelector('.side.left');
  const rightSide = document.querySelector('.side.right');
  const backButtons = document.querySelectorAll('.back-button');

  const projectCards = document.querySelectorAll('.project-card');
  const detailPanels = document.querySelectorAll('.detail-inner');

  const projectPhotoImg = document.getElementById('projectPhotoImg');
  const projectPhotoTitle = document.getElementById('projectPhotoTitle');
  const projectPhotoCaption = document.getElementById('projectPhotoCaption');

  const projectsOverlay = document.querySelector('.overlay-projects');
  const bioOverlay = document.querySelector('.overlay-bio');

  const OPEN_LOCK_MS  = 400;
  const CLOSE_LOCK_MS = 1150;

  let lockTimer = null;

  let activeCard = document.querySelector('.project-card.selected') || projectCards[0] || null;
  let hoverCard = null;

  const CAPTURE_EVENTS = [
    "pointerdown","pointerup","click","dblclick",
    "mousedown","mouseup","touchstart","touchend",
    "wheel","contextmenu"
  ];
  function captureBlocker(e){
    if (!container.classList.contains('transitioning')) return;
    e.preventDefault();
    e.stopPropagation();
    if (typeof e.stopImmediatePropagation === "function") e.stopImmediatePropagation();
  }
  function enableCaptureBlock(){
    CAPTURE_EVENTS.forEach(ev => window.addEventListener(ev, captureBlocker, true));
  }
  function disableCaptureBlock(){
    CAPTURE_EVENTS.forEach(ev => window.removeEventListener(ev, captureBlocker, true));
  }

  function lockUI(ms){
    container.classList.add('transitioning');
    enableCaptureBlock();
    clearTimeout(lockTimer);
    lockTimer = setTimeout(unlockUI, ms);
  }

  function unlockUI(){
    clearTimeout(lockTimer);
    lockTimer = null;
    container.classList.remove('transitioning');
    disableCaptureBlock();
  }

  function isLocked(){
    return container.classList.contains('transitioning') || container.classList.contains('closing');
  }

  function openProjects() {
    if (isLocked()) return;
    lockUI(OPEN_LOCK_MS);

    container.classList.remove('show-bio', 'closing', 'closing-bio', 'closing-projects', 'returning-bio', 'returning-projects');

    container.classList.remove('show-projects');
    void container.offsetWidth;
    container.classList.add('show-projects');
  }

  function openBio() {
    if (isLocked()) return;
    lockUI(OPEN_LOCK_MS);

    container.classList.remove('show-projects', 'closing', 'closing-bio', 'closing-projects', 'returning-bio', 'returning-projects');

    container.classList.remove('show-bio');
    void container.offsetWidth;
    container.classList.add('show-bio');
  }

  function closeOverlay() {
    if (isLocked()) return;

    const closingProjects = container.classList.contains('show-projects');
    const closingBio = container.classList.contains('show-bio');
    if (!closingProjects && !closingBio) return;

    lockUI(CLOSE_LOCK_MS);
    container.classList.add('closing');

    if (closingProjects) {
      container.classList.add('closing-projects');

      let done = false;
      const finish = () => {
        if (done) return;
        done = true;

        container.classList.remove('show-projects', 'closing', 'closing-projects');

        container.classList.add('returning-projects');
        setTimeout(() => container.classList.remove('returning-projects'), 650);
      };

      projectsOverlay.addEventListener('animationend', (e) => {
        if (e.animationName === 'overlayFadeOut') finish();
      }, { once: true });

      setTimeout(finish, 520);

    } else {
      container.classList.add('closing-bio');

      let done = false;
      const finish = () => {
        if (done) return;
        done = true;

        container.classList.remove('show-bio', 'closing', 'closing-bio');

        container.classList.add('returning-bio');
        setTimeout(() => container.classList.remove('returning-bio'), 650);
      };

      bioOverlay.addEventListener('animationend', (e) => {
        if (e.animationName === 'overlayFadeOut') finish();
      }, { once: true });

      setTimeout(finish, 520);
    }
  }

  leftSide.addEventListener('click', openProjects);
  rightSide.addEventListener('click', openBio);
  backButtons.forEach(btn => btn.addEventListener('click', closeOverlay));

  function fadeIn(el, duration = 220) {
    el.getAnimations().forEach(a => a.cancel());
    el.style.opacity = "0";
    el.animate([{ opacity: 0 }, { opacity: 1 }], { duration, easing: "ease", fill: "forwards" });
    el.style.opacity = "1";
  }

  function updateProjectPhotoFromCard(card) {
    const url = card.dataset.photo;

    const alt = card.dataset.photoalt || "";
    const title = card.dataset.phototitle || card.querySelector("h2")?.textContent || "Project";
    const caption = card.dataset.photocaption || "";

    projectPhotoTitle.textContent = title;
    projectPhotoCaption.textContent = caption;

    const pre = new Image();
    pre.onload = () => {
      projectPhotoImg.src = url;
      projectPhotoImg.alt = alt;
      fadeIn(projectPhotoImg, 220);
    };
    pre.onerror = () => {
      projectPhotoImg.removeAttribute("src");
      projectPhotoImg.alt = "";
      projectPhotoCaption.textContent = "Image not found.";
      fadeIn(projectPhotoImg, 220);
    };
    pre.src = url;
  }

  projectCards.forEach(card => {
    card.addEventListener('click', () => {
      if (container.classList.contains('transitioning')) return;

      const targetId = card.getAttribute('data-target');

      projectCards.forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');

      detailPanels.forEach(panel => {
        const isActive = panel.id === targetId;
        panel.classList.toggle('active', isActive);

        if (isActive) {
          const body = panel.querySelector('.detail-body');
          if (body) body.scrollTop = 0;
        }
      });

      activeCard = card;
      updateProjectPhotoFromCard(card);
    });

    card.addEventListener('mouseenter', () => {
      if (container.classList.contains('transitioning')) return;
      hoverCard = card;
      updateProjectPhotoFromCard(card);
    });

    card.addEventListener('mouseleave', () => {
      if (container.classList.contains('transitioning')) return;
      hoverCard = null;
      if (activeCard) updateProjectPhotoFromCard(activeCard);
    });
  });

  const initial = document.querySelector('.project-card.selected') || projectCards[0];
  if (initial) {
    activeCard = initial;
    updateProjectPhotoFromCard(initial);
  }

  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxClose = document.getElementById('lightboxClose');

  const lightboxExtras = document.getElementById('lightboxExtras');
  const lightboxExtrasGrid = document.getElementById('lightboxExtrasGrid');

  let lastFocusedEl = null;

  const EXTRA_STOCK_MAP = {
    "skate-sharpener-3": [
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/SKATE_SHAPRENER_DRAWINGS_AND_REPORT_page-0002_bbd1ll.jpg",
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/SKATE_SHAPRENER_DRAWINGS_AND_REPORT_page-0003_dy7sob.jpg",
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/SKATE_SHAPRENER_DRAWINGS_AND_REPORT_page-0004_zdmlfk.jpg"
    ],
    "plc-final-1": [
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/I.O_CHART_AND_LOGIC_page-0002_knmmq9.jpg",
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/I.O_CHART_AND_LOGIC_page-0003_hijyws.jpg",
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/I.O_CHART_AND_LOGIC_page-0004_udglkr.jpg",
      "https://res.cloudinary.com/dhbpbyrc9/image/upload/I.O_CHART_AND_LOGIC_page-0005_vuxpaa.jpg"
    ]
  };

  function clearExtras(){
    lightboxExtrasGrid.innerHTML = "";
    lightboxExtras.classList.remove("open");
    lightboxExtras.setAttribute("aria-hidden", "true");
    lightboxExtrasGrid.classList.remove("cols-4");
  }

  function buildExtras(key){
    clearExtras();
    const urls = EXTRA_STOCK_MAP[key];
    if (!urls || !urls.length) return;

    if (key === "plc-final-1") {
      lightboxExtrasGrid.classList.add("cols-4");
    }

    urls.forEach((url, idx) => {
      const img = document.createElement("img");
      img.src = url;
      img.alt = `Extra stock image ${idx + 1}`;

      img.addEventListener("click", (e) => {
        e.stopPropagation();
        lightboxImg.src = url;
        lightboxImg.alt = img.alt;
      });

      lightboxExtrasGrid.appendChild(img);
    });

    lightboxExtras.classList.add("open");
    lightboxExtras.setAttribute("aria-hidden", "false");
  }

  function openLightboxFromImg(imgEl){
    if (!imgEl || !imgEl.src) return;

    lastFocusedEl = document.activeElement;

    lightboxImg.src = imgEl.src;
    lightboxImg.alt = imgEl.alt || "Preview image";

    const extraKey = imgEl.dataset.extraStock;
    if (extraKey) buildExtras(extraKey);
    else clearExtras();

    lightbox.classList.add('open');
    lightbox.setAttribute('aria-hidden', 'false');

    document.documentElement.style.overflow = 'hidden';

    lightboxClose.focus();

    const panel = lightbox.querySelector(".lightbox-panel");
    if (panel) panel.scrollTop = 0;
  }

  function closeLightbox(){
    lightbox.classList.remove('open');
    lightbox.setAttribute('aria-hidden', 'true');

    lightboxImg.removeAttribute('src');
    lightboxImg.alt = "";

    clearExtras();

    document.documentElement.style.overflow = '';

    if (lastFocusedEl && typeof lastFocusedEl.focus === "function") {
      lastFocusedEl.focus();
    }
  }

  document.addEventListener('click', (e) => {
    const img = e.target.closest('.detail-gallery img');
    if (!img) return;
    if (container.classList.contains('transitioning')) return;
    openLightboxFromImg(img);
  });

  lightboxClose.addEventListener('click', closeLightbox);

  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox.classList.contains('open')) {
      e.preventDefault();
      closeLightbox();
    }
  });
</script>

</body>
</html>
